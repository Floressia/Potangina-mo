;/*FB_PKG_DELIM*/

__d("LSShimHybridThreadAuthoritativeDelete.nop",["I64","LSShimHybridThreadDeleteUtil","MAWBridgeSendAndReceive","MAWDbChatId","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=(yield d("LSShimHybridThreadDeleteUtil").getMiActMappingRow(a,c));e!=null&&(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","deleteThread",{threadId:d("MAWDbChatId").unsafeCoerceToChatId((h||(h=d("I64"))).to_int32(e.clientThreadPk))}).then(function(){return e}));return d("LSShimHybridThreadDeleteUtil").deleteE2EEMetadataTable(a,e)});function c(b,c,d){return a.apply(this,arguments)}return c}();g["default"]=a}),98);
__d("LSHybridThreadAuthoritativeDelete",["LSShimHybridThreadAuthoritativeDelete.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[];return c.sequence([function(d){return c.nativeOperation(b("LSShimHybridThreadAuthoritativeDelete.nop"),a[0])},function(a){return c.resolve(d)}])}e.exports=a}),null);
__d("LSDeletePartialThread",["LSHybridThreadAuthoritativeDelete"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[0]=void 0:(b=a.item,d[0]=b.authorityLevel)})},function(e){return c.i64.neq(d[0],void 0)?c.i64.eq(d[0],c.i64.cast([0,60]))?c.storedProcedure(b("LSHybridThreadAuthoritativeDelete"),a[0]):c.resolve():c.resolve()}])},function(a){return c.resolve(e)}])}e.exports=a}),null);